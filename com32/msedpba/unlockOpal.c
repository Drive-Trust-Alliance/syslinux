/* C:B**************************************************************************
This software is Copyright 2014-2015 Michael Romeo <r0m30@r0m30.com>

    This file is part of msed.

    msed is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    msed is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with msed.  If not, see <http://www.gnu.org/licenses/>.

* C:E********************************************************************** */
#include "unlockOpal.h"

uint8_t unlockOpal(AHCI_PORT *port, char * pass, uint8_t mbr) {
    uint8_t startSession[] = {
        0x00,0x00,0x00,0x00,0x07,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x7c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x64,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x58,
        0xf8,
        0xa8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xff,
        0xa8,0x00,0x00,0x00,0x00,0x00,0x00,0xff,0x02,
        0xf0,
        0x81,0x69,
        0xa8,0x00,0x00,0x02,0x05,0x00,0x00,0x00,0x02,
        0x01,
        0xf2,0x00,0xd0,0x20,
        0x2e,0xe3,0x7b,0xab,0xf7,0x3a,0xd0,0x77,0xc7,0x72,0x02,0x9c,0x33,0x9c,0x09,0x55,
        0xc4,0xd8,0x50,0xaa,0x51,0xde,0x3c,0xc4,0x2d,0x1a,0x9f,0xed,0x4a,0xe5,0xbc,0xc0,
        0xf3,
        0xf2,0x03,0xa8,
        0x00,0x00,0x00,0x09,0x00,0x01,0x00,0x01,
        0xf3,
        0xf1,
        0xf9,
        0xf0,0x00,0x00,0x00,0xf1,
    };
    uint8_t unlock[] = {
        0x00,0x00,0x00,0x00,0x07,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x4c,0xff,0xff,0xfc,0x00,0x00,0x00,0x00,0x69,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x28,
        0xf8,
        0xa8,0x00,0x00,0x08,0x02,0x00,0x00,0x00,0x01,
        0xa8,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x17,
        0xf0,0xf2,0x01,0xf0,
        0xf2,0x07,0x00,0xf3,
        0xf2,0x08,0x00,0xf3,
        0xf1,0xf3,0xf1,
        0xf9,
        0xf0,0x00,0x00,0x00,0xf1,
    };
    uint8_t mbrDone[] = {
        0x00,0x00,0x00,0x00,0x07,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x48,0xff,0xff,0xfc,0x52,0x00,0x00,0x00,0x69,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x24,
        0xf8,
        0xa8,0x00,0x00,0x08,0x03,0x00,0x00,0x00,0x01,
        0xa8,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x17,
        0xf0,0xf2,0x01,0xf0,
        0xf2,0x02,0x01,0xf3,
        0xf1,0xf3,0xf1,
        0xf9,
        0xf0,0x00,0x00,0x00,0xf1,
    };
     uint8_t endSession[] = {
        0x00,0x00,0x00,0x00,0x07,0xfe,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x28,0xff,0xff,0xfc,0x01,0x00,0x00,0x00,0x69,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,
        0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xfa,0x00,0x00,0x00,
     };
     uint8_t cmd[IO_BUFFER_LENGTH];
     
     return 0;
}
